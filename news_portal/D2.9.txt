u1=User.objects.create_user(username='Serg')
u2=User.objects.create_user(username='Gleb')

Author.objects.create(authorUser=u1)
Author.objects.create(authorUser=u2) 

Category.objects.create(name='IT')
Category.objects.create(name='UMOR')
Category.objects.create(name='TRAVEL')
Category.objects.create(name='NEWS')

Post.objects.create(author=author,CategoryType='NW',title='Открытие школы',text='....')
Post.objects.create(author=author,CategoryType='AR',title='Хабл смотрит',text='....')
Post.objects.create(author=author,CategoryType='AR',title='Пластик вреден',text='....')

Post.objects.get(id=1).PostCategory.add(Category.objects.get(id=4))
Post.objects.get(id=2).PostCategory.add(Category.objects.get(id=1))
Post.objects.get(id=2).PostCategory.add(Category.objects.get(id=4))
Post.objects.get(id=3).PostCategory.add(Category.objects.get(id=2))

Comment.objects.create(commentPost=Post.objects.get(id=1),commentUser=Author.objects.get(id=1).authorUser,text="прелестно")
Comment.objects.create(commentPost=Post.objects.get(id=2),commentUser=Author.objects.get(id=1).authorUser,text="круто")     
Comment.objects.create(commentPost=Post.objects.get(id=3),commentUser=Author.objects.get(id=1).authorUser,text="смешно") 
Comment.objects.create(commentPost=Post.objects.get(id=3),commentUser=Author.objects.get(id=2).authorUser,text="уныло")

Comment.objects.get(id=1).like() 
Comment.objects.get(id=2).like() 
Comment.objects.get(id=3).like() 
Comment.objects.get(id=4).dislike() 

Post.objects.get(id=1).like()
Post.objects.get(id=2).like()
Post.objects.get(id=3).dislike()

a1=Author.objects.get(id=1)
a2=Author.objects.get(id=2)
a1.update_rating()
a2.update_rating()

b=Author.objects.order_by('-ratingAuthor')[:1]

for i in a1:
	i.ratingAuthor
	i.authorUser.username

p1 = Post.objects.order_by('-rating').values('dateCreation','author__authorUser__username','rating','title').preview()[0]

p = Post.objects.order_by('-rating')[:1]

for i in p:
	i.DateCreation
	i.author.authorUser.username
	i.rating
	i.title
	i.preview()[0]

c = Comment.objects.order_by('-rating')[:1]

for i in c:
	i.DateCreation
	i.author.authorUser.username
	i.rating
	i.text
